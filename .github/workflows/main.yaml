name: CI # å·¥ä½œæµåç§°

on: # è§¦å‘æ¡ä»¶
  push:
    branches:
      - main # å½“ä»£ç æäº¤åˆ° main åˆ†æ”¯æ—¶è§¦å‘

jobs: # å·¥ä½œæµä¸­çš„ä»»åŠ¡
  run-tests: # è¿è¡Œå•å…ƒæµ‹è¯•
    runs-on: ubuntu-latest # è¿è¡Œç¯å¢ƒ
    strategy: # ä»»åŠ¡çš„æ‰§è¡Œç­–ç•¥
      matrix:
        node-version: [16]
    steps: # æ‰§è¡Œæ­¥éª¤
      - uses: actions/checkout@v3 # è¿™æ˜¯ä¸€ä¸ª GitHub Actionï¼Œç”¨äºå°†ä»£ç  checkout åˆ°è™šæ‹Ÿæœºä¸­
      - uses: actions/setup-node@v3 # è¿™æ˜¯ä¸€ä¸ª GitHub Actionï¼Œç”¨äºå®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ node
        with:
          node-version: ${{ matrix.node-version }}
          registry-url: https://registry.npmjs.org
      - name: Install dependencies ğŸ“¦ï¸ # å®‰è£…ä¾èµ–
        run: npm install
      - name: Code Climate Coverage Action
        uses: paambaati/codeclimate-action@v3.2.0 # å°†æµ‹è¯•è¦†ç›–ç‡çš„ä¿¡æ¯ä¸Šä¼ åˆ° Code Climate ä¸­
        env:
          CC_TEST_REPORTER_ID: ba8909ffa1f354bfc4629fa15a1fb1bd3c2a322e3e3a4d108c1acc39ba83ba71 # è¿™é‡Œçš„ CC_TEST_REPORTER_ID æ˜¯ Code Climate çš„ä¸€ä¸ª tokenï¼Œéœ€è¦åœ¨ Code Climate çš„ Repo Settings é¡µé¢ä¸­ï¼Œæ‰¾åˆ° Test Coverageï¼Œç„¶åç‚¹å‡» Copy Code Climate Test Reporter ID
        with:
          coverageCommand: npm run test:coverage
          debug: true